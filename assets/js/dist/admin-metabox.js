/*! For license information please see admin-metabox.js.LICENSE.txt */
!function(){const t=jQuery;t(document).ready((function(){t(".char-counter").each((function(e,a){t(a).prev("input, textarea").keyup((function(){const e=t(this).val().length,n=parseInt(t(this).attr("data-max-length")),o=parseInt(t(this).attr("data-min-length"));let i=!0;t(a).find("strong").text(e),o&&e<o&&(i=!1),n&&e>n&&(i=!1),i?t(a).removeClass("ng").addClass("ok"):t(a).removeClass("ok").addClass("ng")}))})),t(".wpametu-datetime-picker").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:00"}),window.IRT&&t(".token-input").each((function(e,a){t(a).tokenInput(t(a).attr("data-endpoint"),{method:"GET",queryParam:"s",theme:"admin",preventDuplicates:!0,tokenValue:"id",tokenLimit:t(a).attr("data-max-length")?parseInt(t(a).attr("data-max-length"),10):null,hintText:IRT.hintText,noResultsText:IRT.noResultsText,searchingText:IRT.searchingText,prePopulate:WPametuTokenInput[t(a).attr("id")]})})),t(".geo-row").each((function(e,a){const n=t(a).find("input[type=hidden]"),o=t(a).find(".wpametu-map");let i,s,r,l,d,g,c,p;if(n.length&&o.length)if(r=parseInt(n.attr("data-zoom"),10),l=n.val().split(","),c=t("#"+n.attr("data-target")),2!==l.length&&(l=[n.attr("data-lat"),n.attr("data-lng")]),s=new google.maps.LatLng(l[0],l[1]),i=new google.maps.Map(o.get(0),{center:s,zoom:r,mapTypeId:google.maps.MapTypeId.ROADMAP}),d=new google.maps.Marker({draggable:!n.attr("data-no-drag"),map:i,position:s}),g=new google.maps.Geocoder,c.length){p=function(){const e=c.val(),a=t('<i class="dashicons dashicons-update wpametu-spinner"></i>');c.after(a),e.length&&g.geocode({address:e},(function(t,e){e===google.maps.GeocoderStatus.OK?(i.setCenter(t[0].geometry.location),d.setPosition(t[0].geometry.location),o.addClass("ok")):o.removeClass("ok"),a.remove()}))},p();let e=[];c.focus((function(){e.push(setInterval(p,3e3))})),c.blur((function(){p(),t.each(e,(function(t,e){clearInterval(e)})),e=[]}))}else google.maps.event.addListener(d,"position_changed",(function(){o.hasClass("original")?o.trigger("move.gmap",[d,i,n]):n.val(this.position.lat()+","+this.position.lng())})),t(a).on("click",".gmap-geocoder-btn",(function(e){e.preventDefault();const a=t(this).prev("input").val(),n=t(this).attr("data-failure");a.length&&g.geocode({address:a},(function(t,e){e===google.maps.GeocoderStatus.OK?(i.setCenter(t[0].geometry.location),d.setPosition(t[0].geometry.location)):WPametu.alert(n)}))}))}))}))}();
//# sourceMappingURL=admin-metabox.js.map