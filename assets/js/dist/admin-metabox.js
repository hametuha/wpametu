!function(t){"use strict";t(document).ready(function(){t(".char-counter").each(function(e,a){var n=t(a).prev("input, textarea");n.keyup(function(){var e=t(this).val().length,n=parseInt(t(this).attr("data-max-length")),o=parseInt(t(this).attr("data-min-length")),i=!0;t(a).find("strong").text(e),o&&e<o&&(i=!1),n&&e>n&&(i=!1),i?t(a).removeClass("ng").addClass("ok"):t(a).removeClass("ok").addClass("ng")})}),t(".wpametu-datetime-picker").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:00"}),window.IRT&&t(".token-input").each(function(e,a){t(a).tokenInput(t(a).attr("data-endpoint"),{method:"GET",queryParam:"s",theme:"admin",preventDuplicates:!0,tokenValue:"id",tokenLimit:t(a).attr("data-max-length")?parseInt(t(a).attr("data-max-length"),10):null,hintText:IRT.hintText,noResultsText:IRT.noResultsText,searchingText:IRT.searchingText,prePopulate:WPametuTokenInput[t(a).attr("id")]})}),t(".geo-row").each(function(e,a){var n,o,i,r,s,l,d,g,p=t(a).find("input[type=hidden]"),m=t(a).find(".wpametu-map");t(a).find(".gmap-geocoder");if(p.length&&m.length)if(i=parseInt(p.attr("data-zoom"),10),r=p.val().split(","),d=t("#"+p.attr("data-target")),2!==r.length&&(r=[p.attr("data-lat"),p.attr("data-lng")]),o=new google.maps.LatLng(r[0],r[1]),n=new google.maps.Map(m.get(0),{center:o,zoom:i,mapTypeId:google.maps.MapTypeId.ROADMAP}),s=new google.maps.Marker({draggable:!p.attr("data-no-drag"),map:n,position:o}),l=new google.maps.Geocoder,d.length){g=function(){var e=d.val(),a=t('<i class="dashicons dashicons-update wpametu-spinner"></i>');d.after(a),e.length&&l.geocode({address:e},function(t,e){e==google.maps.GeocoderStatus.OK?(n.setCenter(t[0].geometry.location),s.setPosition(t[0].geometry.location),m.addClass("ok")):m.removeClass("ok"),a.remove()})},g();var c=[];d.focus(function(){c.push(setInterval(g,3e3))}),d.blur(function(){g(),t.each(c,function(t,e){clearInterval(e)}),c=[]})}else google.maps.event.addListener(s,"position_changed",function(t){m.hasClass("original")?m.trigger("move.gmap",[s,n,p]):p.val(this.position.lat()+","+this.position.lng())}),t(a).on("click",".gmap-geocoder-btn",function(e){e.preventDefault();var a=t(this).prev("input").val(),o=t(this).attr("data-failure");a.length&&l.geocode({address:a},function(t,e){e==google.maps.GeocoderStatus.OK?(n.setCenter(t[0].geometry.location),s.setPosition(t[0].geometry.location)):WPametu.alert(o)})})})})}(jQuery);
//# sourceMappingURL=map/admin-metabox.js.map
