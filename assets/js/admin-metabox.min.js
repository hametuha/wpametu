!function($){"use strict";$(document).ready(function(){$(".char-counter").each(function(t,e){var a=$(e).prev("input, textarea");a.keyup(function(){var t=$(this).val().length,a=parseInt($(this).attr("data-max-length")),o=parseInt($(this).attr("data-min-length")),n=!0;$(e).find("strong").text(t),o&&o>t&&(n=!1),a&&t>a&&(n=!1),n?$(e).removeClass("ng").addClass("ok"):$(e).removeClass("ok").addClass("ng")})}),$(".geo-row").each(function(t,e){var a=$(e).find("input[type=hidden]"),o=$(e).find(".wpametu-map"),n=$(e).find(".gmap-geocoder"),s,r,i,g,l,d,c,p;if(a.length&&o.length)if(i=parseInt(a.attr("data-zoom"),10),g=a.val().split(","),c=$("#"+a.attr("data-target")),2!==g.length&&(g=[a.attr("data-lat"),a.attr("data-lng")]),r=new google.maps.LatLng(g[0],g[1]),s=new google.maps.Map(o.get(0),{center:r,zoom:i,mapTypeId:google.maps.MapTypeId.ROADMAP}),l=new google.maps.Marker({draggable:!a.attr("data-no-drag"),map:s,position:r}),d=new google.maps.Geocoder,c.length){p=function(){var t=c.val(),e=$('<i class="dashicons dashicons-update wpametu-spinner"></i>');c.after(e),t.length&&d.geocode({address:t},function(t,a){a==google.maps.GeocoderStatus.OK?(s.setCenter(t[0].geometry.location),l.setPosition(t[0].geometry.location),o.addClass("ok")):o.removeClass("ok"),e.remove()})},p();var u=[];c.focus(function(){u.push(setInterval(p,3e3))}),c.blur(function(){p(),$.each(u,function(t,e){clearInterval(e)}),u=[]})}else google.maps.event.addListener(l,"position_changed",function(t){o.hasClass("original")?o.trigger("move.gmap",[l,s,a]):a.val(this.position.lat()+","+this.position.lng())}),$(e).on("click",".gmap-geocoder-btn",function(t){t.preventDefault();var e=$(this).prev("input").val(),a=$(this).attr("data-failure");e.length&&d.geocode({address:e},function(t,e){e==google.maps.GeocoderStatus.OK?(s.setCenter(t[0].geometry.location),l.setPosition(t[0].geometry.location)):WPametu.alert(a)})})})})}(jQuery);