!function($){"use strict";$(document).ready(function(){$(".char-counter").each(function(t,e){var a=$(e).prev("input, textarea");a.keyup(function(){var t=$(this).val().length,a=parseInt($(this).attr("data-max-length")),n=parseInt($(this).attr("data-min-length")),o=!0;$(e).find("strong").text(t),n&&n>t&&(o=!1),a&&t>a&&(o=!1),o?$(e).removeClass("ng").addClass("ok"):$(e).removeClass("ok").addClass("ng")})}),window.IRT&&$(".token-input").each(function(t,e){$(e).tokenInput($(e).attr("data-endpoint"),{method:"GET",queryParam:"s",theme:"admin",preventDuplicates:!0,tokenValue:"id",tokenLimit:$(e).attr("data-max-length")?parseInt($(e).attr("data-max-length"),10):null,hintText:IRT.hintText,noResultsText:IRT.noResultsText,searchingText:IRT.searchingText,prePopulate:WPametuTokenInput[$(e).attr("id")]})}),$(".geo-row").each(function(t,e){var a=$(e).find("input[type=hidden]"),n=$(e).find(".wpametu-map"),o=$(e).find(".gmap-geocoder"),i,r,s,l,g,d,p,c;if(a.length&&n.length)if(s=parseInt(a.attr("data-zoom"),10),l=a.val().split(","),p=$("#"+a.attr("data-target")),2!==l.length&&(l=[a.attr("data-lat"),a.attr("data-lng")]),r=new google.maps.LatLng(l[0],l[1]),i=new google.maps.Map(n.get(0),{center:r,zoom:s,mapTypeId:google.maps.MapTypeId.ROADMAP}),g=new google.maps.Marker({draggable:!a.attr("data-no-drag"),map:i,position:r}),d=new google.maps.Geocoder,p.length){c=function(){var t=p.val(),e=$('<i class="dashicons dashicons-update wpametu-spinner"></i>');p.after(e),t.length&&d.geocode({address:t},function(t,a){a==google.maps.GeocoderStatus.OK?(i.setCenter(t[0].geometry.location),g.setPosition(t[0].geometry.location),n.addClass("ok")):n.removeClass("ok"),e.remove()})},c();var u=[];p.focus(function(){u.push(setInterval(c,3e3))}),p.blur(function(){c(),$.each(u,function(t,e){clearInterval(e)}),u=[]})}else google.maps.event.addListener(g,"position_changed",function(t){n.hasClass("original")?n.trigger("move.gmap",[g,i,a]):a.val(this.position.lat()+","+this.position.lng())}),$(e).on("click",".gmap-geocoder-btn",function(t){t.preventDefault();var e=$(this).prev("input").val(),a=$(this).attr("data-failure");e.length&&d.geocode({address:e},function(t,e){e==google.maps.GeocoderStatus.OK?(i.setCenter(t[0].geometry.location),g.setPosition(t[0].geometry.location)):WPametu.alert(a)})})})})}(jQuery);